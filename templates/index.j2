{% extends 'base.j2' %}

{% from 'utils.j2' import plural, plural_count %}

{% block title %}SCP Wiki Extracted Styles{% endblock %}

{% block body %}
  <h1 class="title">Extracted Styles</h1>

  <details>
    <summary>Pages</summary>

    <table class="page-list">
      <tr>
        <th>Link</th>
        <th>Slug</th>
        <th>Module Styles</th>
        <th>Inline Styles</th>
        <th>CSS Classes</th>
        <th>Wikitext Length (characters)</th>
      </tr>

      {% for page in pages %}
        <tr>
          <td>
            <a href="/wikidot-css-scraper/{{ page.slug }}.html">{{ page.title }}</a>
          </td>

          <td>
            <code>{{ page.slug }}</code>
          </td>

          <td>{{ plural_count(page.module_styles, 'style') }}</td>
          <td>{{ plural_count(page.inline_styles, 'style') }}</td>
          <td>{{ plural_count(page.classes, 'class', 'es') }}</td>
          <td>{{ page.source | length | commaify }}</td>
        </tr>
      {% endfor %}
    </table>
  </details>

  <details>
    <summary>Styles</summary>

    <p>
      This is a deduplicated list of items found across all scraped pages.
    </p>

    <h2 class="header">Module Styles</h2>
    <ul class="module-styles-count">
      {% for style, count in module_styles %}
        <li>
          {{ plural(count, 'occurrence') }}
          <pre><code>{{ style }}</code></pre>
        </li>
      {% endfor %}
    </ul>

    <h2 class="header">Inline Styles</h2>
    <ul class="inline-styles-count">
      {% for style, count in inline_styles %}
        <li>
          {{ plural(count, 'occurrence') }}
          <pre><code>{{ style }}</code></pre>
        </li>
      {% endfor %}
    </ul>

    <h2 class="header">CSS Classes</h2>
    <ul class="css-classes-count">
      {% for class, count in classes %}
        <li>
          {{ plural(count, 'usage') }}
          <pre><code>{{ class }}</code></pre>
        </li>
      {% endfor %}
    </ul>
  </details>

  <details>
    <summary>Raw Data</summary>

    <p>
      The raw JSON file containing all the data this report was built from is available for download here:
      <a href="https://github.com/ammongit/wikidot-css-extractor/raw/gh-pages/results.json"><code>results.json</code></a>
      (Warning! Very large, &gt; 100 MB)
    </p>
  </details>
{% endblock %}
